#!/usr/bin/env node
const optionator = require('optionator');

const CLI_OPTION = optionator({
  prepend: 'Usage: styleguide [options]',
  options: [
    {
      option: 'init',
      type: 'Boolean',
      default: 'false',
      description: '설정 초기화 실행',
    },
    {
      option: 'help',
      alias: 'h',
      type: 'Boolean',
      description: '도움말 보기',
    },
  ],
});

const main = async () => {
  const parsedArg = CLI_OPTION.parseArgv(process.argv);
  const {init: initCmd} = parsedArg;

  if (!initCmd) {
    console.log(CLI_OPTION.generateHelp());
    return;
  }

  const {init} = require('../lib/initializer');

  try {
    await init();
    process.exitCode = 0;
  } catch (err) {
    process.exitCode = 1;
    console.error(err.message);
    console.error(err.stack);
  }
};

main();
